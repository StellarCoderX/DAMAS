<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Damas Aposta - Jogo Online</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="main-container">
    <div id="auth-container">
      <form id="login-form">
        <h2>LOGIN</h2>
        <input type="email" id="login-email" placeholder="Email" required />
        <input type="password" id="login-password" placeholder="Senha" required />
        <button type="submit">Entrar</button>
        <p>
          N√£o tem uma conta? <a href="#" id="show-register">Cadastre-se</a>
        </p>
      </form>
      <form id="register-form" style="display: none">
        <h2>Cadastro</h2>
        <input type="email" id="register-email" placeholder="Email" required />
        <input type="password" id="register-password" placeholder="Senha" required />
        <button type="submit">Cadastrar</button>
        <p>J√° tem uma conta? <a href="#" id="show-login">Fa√ßa Login</a></p>
      </form>
      <p id="auth-message" class="message"></p>
    </div>

    <div id="rules-container">
      <h2>REGRAS BRASILEIRAS</h2>
      <ul>
        <li>A captura √© Obrigat√≥ria.</li>
        <li>√â obrigado a capturar pela Lei da Maioria.</li>
        <li>Pode capturar para tr√°s.</li>
        <li>N√£o existe sopro.</li>
        <li>Pedra e Dama tem o mesmo valor para capturar e ser capturada.</li>
        <li>
          S√≥ de passar pela casa de cora√ß√£o a pedra N√ÉO se transforma em Dama.
        </li>
        <li>
          √â permitido passar pela mesma casa mais de uma vez na captura.
        </li>
        <li>N√ÉO pode capturar a mesma Pe√ßa mais de uma vez.</li>
        <li>
          Primeiro efetua o movimento de captura, depois retira-se as pe√ßas.
        </li>
        <li>
          O ganho acontece quando se captura todas as pe√ßas do advers√°rio ou
          quando o seu oponente n√£o tem onde mexer.
        </li>
      </ul>
    </div>
  </div>

  <div id="lobby-container" class="hidden">
    <h2 id="lobby-welcome-message"></h2>

    <button id="add-balance-btn">Adicionar Saldo</button>

    <button id="withdraw-btn" style="background-color: #2ecc71;">Retirar Saldo</button>

    <a href="https://chat.whatsapp.com/IhFRzg8Bt89JhacRTdySUN?mode=wwt" id="whatsapp-group-btn" target="_blank">Entrar
      no Grupo do WhatsApp</a>
    <button id="logout-btn" style="background-color: #c0392b; margin-bottom: 20px">
      Sair
    </button>

    <div class="lobby-section" id="create-room-section">
      <h3>Criar uma nova partida</h3>
      <input type="number" id="bet-amount-input" placeholder="Valor da Aposta" min="1" value="1" />
      <div id="game-mode-selection" style="
            margin-top: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
          ">
        <label for="game-mode-select">Modo de Jogo:</label>
        <select id="game-mode-select" style="
              padding: 5px;
              border-radius: 4px;
              border: 1px solid #ccc;
              background-color: #f0f0f0;
            ">
          <option value="classic">Cl√°ssico 8x8</option>
          <option value="tablita">Tablita 8x8</option>
          <option value="international">Internacional 10x10</option>
        </select>
      </div>

      <div id="time-control-selection" style="
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
          ">
        <label for="time-control-select">Tipo de Tempo:</label>
        <select id="time-control-select" style="
              padding: 5px;
              border-radius: 4px;
              border: 1px solid #ccc;
              background-color: #f0f0f0;
            ">
          <option value="move">Por Jogada (Padr√£o)</option>
          <option value="match">Por Partida (Blitz)</option>
        </select>
      </div>

      <div id="timer-selection-container" style="
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
          ">
        <label for="timer-select">Tempo por Jogada:</label>
        <select id="timer-select" style="padding: 5px; border-radius: 4px; border: 1px solid #ccc">
          <option value="5">5 segundos</option>
          <option value="10">10 segundos</option>
          <option value="30">30 segundos</option>
          <option value="40" selected>40 segundos</option>
          <option value="60">1 minuto</option>
          <option value="90">1 min e 30 seg</option>
        </select>
      </div>

      <button id="create-room-btn">Criar Sala</button>
    </div>

    <div id="waiting-area" class="hidden">
      <p>A aguardar por um oponente...</p>
      <p>A sua sala est√° vis√≠vel para outros jogadores no lobby.</p>
      <button id="cancel-room-btn" style="background-color: #c0392b; margin-top: 10px">
        Cancelar
      </button>
      <strong id="room-code-display" style="display: none"></strong>
    </div>

    <div class="lobby-section" id="open-rooms-section">
      <h3>Salas Abertas</h3>
      <div id="open-rooms-list">
        <p>A carregar salas...</p>
      </div>
    </div>

    <div class="lobby-section" id="active-rooms-section" style="margin-top: 20px;">
      <h3>Jogos em Andamento (Assistir)</h3>
      <div id="active-rooms-list">
        <p>Nenhum jogo em andamento.</p>
      </div>
    </div>

    <p id="lobby-error-message" class="error-message"></p>
  </div>

  <div id="game-container" class="hidden">
    <div id="spectator-indicator" class="hidden"
      style="background-color: #f39c12; color: #fff; padding: 5px 10px; border-radius: 5px; margin-bottom: 10px; font-weight: bold;">
      üëÄ MODO ESPECTADOR
    </div>

    <p id="game-status"></p>
    <div id="board"></div>
    <div id="game-info">
      <p>Vez de: <span id="turn">Brancas</span></p>
      <p>Tempo restante: <span id="timer">40</span>s</p>
      <div id="game-buttons">
        <button id="resign-btn">Desistir</button>
        <button id="draw-btn">Empate</button>
        <button id="spectator-leave-btn" class="hidden" style="background-color: #c0392b;">Sair do Jogo</button>
      </div>
    </div>
  </div>

  <div id="game-over-overlay" class="hidden">
    <div id="winner-screen" class="hidden">
      <div class="firework"></div>
      <div class="firework"></div>
      <div class="firework"></div>
      <h1>Parab√©ns, Voc√™ Ganhou!</h1>
      <p class="revanche-status"></p>
      <div class="confirm-buttons">
        <button class="revanche-btn">Revanche</button>
        <button class="exit-lobby-btn">Voltar √† Tela Principal</button>
      </div>
    </div>
    <div id="loser-screen" class="hidden">
      <div class="emoji">üò¢</div>
      <h1>Voc√™ Perdeu</h1>
      <p class="revanche-status"></p>
      <div class="confirm-buttons">
        <button class="revanche-btn">Revanche</button>
        <button class="exit-lobby-btn">Voltar √† Tela Principal</button>
      </div>
    </div>
    <div id="draw-screen" class="hidden">
      <h1>Empate!</h1>
      <p id="draw-reason"></p>
      <p class="revanche-status"></p>
      <div class="confirm-buttons">
        <button class="revanche-btn">Revanche</button>
        <button class="exit-lobby-btn">Voltar √† Tela Principal</button>
      </div>
    </div>
    <div id="spectator-end-screen" class="hidden"
      style="background-color: #2c3e50; color: white; padding: 40px; border-radius: 15px; text-align: center; border: 5px solid #3498db;">
      <h1>Fim de Jogo</h1>
      <p id="spectator-end-message"></p>
      <div class="confirm-buttons">
        <button class="exit-lobby-btn" style="background-color: #3498db;">Voltar ao Lobby</button>
      </div>
    </div>
  </div>

  <div id="confirm-bet-overlay" class="hidden">
    <div id="confirm-bet-box">
      <h3>Confirmar Aposta</h3>
      <p>
        A aposta para esta sala √© de
        <strong id="confirm-bet-amount"></strong> cr√©ditos.
      </p>
      <p id="confirm-game-mode" style="font-weight: bold; margin-top: 10px"></p>
      <p>Voc√™ aceita?</p>
      <div class="confirm-buttons">
        <button id="accept-bet-btn">Aceitar</button>
        <button id="decline-bet-btn">Recusar</button>
      </div>
    </div>
  </div>
  <div id="connection-lost-overlay" class="hidden">
    <div id="connection-lost-box">
      <h3>Conex√£o Inst√°vel</h3>
      <p id="connection-lost-message"></p>
      <div class="loader"></div>
    </div>
  </div>
  <div id="next-game-overlay" class="hidden">
    <div id="next-game-box">
      <h2 id="next-game-title">Fim da 1¬™ Partida!</h2>
      <p id="match-score-display" style="font-size: 1.2em; margin: 15px 0"></p>
      <p>A 2¬™ partida come√ßar√° com as cores invertidas...</p>
      <p style="margin-top: 15px">
        A iniciar em <span id="next-game-timer">10</span>s
      </p>
    </div>
  </div>

  <div id="draw-request-overlay" class="hidden">
    <div id="draw-request-box">
      <h3>Pedido de Empate</h3>
      <p>O seu oponente prop√¥s um empate. Voc√™ aceita?</p>
      <div class="confirm-buttons">
        <button id="accept-draw-btn">Aceitar</button>
        <button id="decline-draw-btn">Recusar</button>
      </div>
    </div>
  </div>

  <div id="pix-overlay" class="hidden">
    <div class="modal-box"> <!-- USANDO A NOVA CLASSE -->
      <h3>Recarga Livre</h3>
      <p>Envie o valor que desejar!</p>

      <img src="qrcode.png" alt="QR Code PIX"
        style="width: 200px; height: auto; margin: 15px auto; display: block; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">

      <p>Ou copie a chave abaixo:</p>
      <div class="pix-info">
        <p><strong>Tipo de Chave:</strong> Copia e Cola (QR Code)</p>
        <p>
          <strong>Chave:</strong>
          <span
            id="pix-key">00020126580014br.gov.bcb.pix01362b3485a0-d28c-4d37-9b5d-b2efcac4cee65204000053039865802BR5919TIAGO
            SOUZA SANTANA6008Salvador6211050726f78796304D315</span>
        </p>
        <p><strong>Nome:</strong> Tiago Souza Santana</p>
      </div>
      <button id="copy-pix-key-btn">Copiar Chave</button>
      <p class="instructions">
        Ap√≥s o pagamento, envie o comprovativo para o nosso WhatsApp para que
        o saldo seja adicionado √† sua conta.
      </p>
      <a href="https://wa.me/5571920007957?text=Ol%C3%A1%21%20Estou%20enviando%20o%20comprovativo%20do%20meu%20pagamento%20PIX."
        target="_blank" class="whatsapp-link">Enviar Comprovante!</a>
      <button id="close-pix-overlay-btn">Fechar</button>
    </div>
  </div>

  <!-- OVERLAY DE SAQUE ATUALIZADO COM DESIGN PADRONIZADO -->
  <div id="withdraw-overlay" class="hidden">
    <div class="modal-box"> <!-- USANDO A MESMA CLASSE .modal-box -->
      <h3>Solicitar Retirada</h3>
      <p>Preencha os dados para receber seu saldo via PIX.</p>

      <form id="withdraw-form" style="display: flex; flex-direction: column; gap: 10px;">
        <!-- CLASSES .modal-input ADICIONADAS PARA SUBSTITUIR INLINE STYLES -->
        <input type="text" id="withdraw-pix-key" placeholder="Sua Chave PIX" required class="modal-input">
        <input type="number" id="withdraw-amount" placeholder="Valor (R$)" min="1" required class="modal-input">

        <!-- Bot√£o com estilo similar ao do PIX -->
        <button type="submit" style="background-color: #2ecc71; margin-top: 10px;">Solicitar</button>
      </form>

      <p id="withdraw-message" style="margin-top: 10px; font-weight: bold;"></p>

      <!-- Bot√£o Fechar Padronizado -->
      <button id="close-withdraw-overlay-btn">Fechar</button>
    </div>
  </div>

  <audio id="move-sound" src="/sounds/move.mp3" preload="auto"></audio>
  <audio id="capture-sound" src="/sounds/capture.mp3" preload="auto"></audio>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>

</html>